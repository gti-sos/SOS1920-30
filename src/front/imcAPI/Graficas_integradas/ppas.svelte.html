<script>
    import {pop} from "svelte-spa-router";
    import Button from "sveltestrap/src/Button.svelte";
    async function loadGraph(){
        let lugares = [];
        let ppas = [];
        let recogidadeinfo= [];
    const resData = await fetch("/api/v1/ppas");
    recogidadeinfo = await resData.json();
    recogidadeinfo.filter(i => i.year == 2017).forEach((i) => {
            let lugar = i.country;
                lugares.push(lugar);
            let ppa = i.ppa_per_capita;
                ppas.push(ppa);
            });     
  
    var Datos = [
      {
        x: lugares,
        y: ppas,
        type: 'bar'
      }
    ];
    Plotly.newPlot('myDiv', Datos);
    console.log(Datos);  
    }
    </script>
    
    <svelte:head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js" on:load={loadGraph}></script>
    </svelte:head>
    
    <main>
    
  GRAFICA PAISES POR SALARIO PROMEDIO ANUAL:
  <div id='myDiv'> </div>
<p>
    <Button outline color="secondary" on:click="{pop}"> <i class="fas fa-arrow-circle-left"></i> Atr√°s </Button>

</p>

</main>